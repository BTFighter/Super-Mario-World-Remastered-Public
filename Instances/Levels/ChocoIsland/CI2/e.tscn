[gd_scene load_steps=16 format=3 uid="uid://bfmpiciwwq271"]

[ext_resource type="Script" path="res://Scripts/Classes/Levels/CI2/ci_2.gd" id="1_1lgw2"]
[ext_resource type="AudioStream" uid="uid://cwraguncjdkmy" path="res://Resources/MusicTracks/Overworld.tres" id="2_5086k"]
[ext_resource type="PackedScene" uid="uid://c1xol3wby2j0k" path="res://Instances/Prefabs/level_bg.tscn" id="2_b4qq5"]
[ext_resource type="Texture2D" uid="uid://dka11kf852nal" path="res://Assets/Sprites/Backgrounds/Overworld/Rocks/Rock5.png" id="4_5fdwu"]
[ext_resource type="PackedScene" uid="uid://cqw1qs0bt5s4o" path="res://Instances/Prefabs/Player.tscn" id="5_3qax1"]
[ext_resource type="PackedScene" uid="uid://dwavjbyw0v12l" path="res://Instances/Prefabs/tile_map.tscn" id="7_hl8s4"]
[ext_resource type="Texture2D" uid="uid://7cjc35xehaux" path="res://Assets/LevelGuides/CI2E.png" id="10_8oofr"]
[ext_resource type="PackedScene" uid="uid://cncvt3jgdjq2j" path="res://Instances/Prefabs/Enemies/dino_rhino.tscn" id="11_ndfno"]
[ext_resource type="PackedScene" uid="uid://ra3n0546w2ra" path="res://Instances/Prefabs/Enemies/dino_torch.tscn" id="12_ljj68"]
[ext_resource type="PackedScene" uid="uid://nldepcgj07xt" path="res://Instances/Prefabs/Items/dragon_coin.tscn" id="13_3vxkn"]
[ext_resource type="PackedScene" uid="uid://cly5f6jt1cd28" path="res://Instances/Prefabs/Interactables/pipe_area.tscn" id="14_86g4k"]
[ext_resource type="PackedScene" uid="uid://ywuc3q4pxfhj" path="res://Instances/Prefabs/Items/passerby_item.tscn" id="15_a4xh3"]
[ext_resource type="PackedScene" uid="uid://dsi7hx88qsxq1" path="res://Instances/Prefabs/Items/mushroom_item.tscn" id="16_236xj"]

[sub_resource type="Shader" id="Shader_1xk88"]
code = "// HSV to RBG from https://www.rapidtables.com/convert/color/hsv-to-rgb.html
// Rotation matrix from https://en.wikipedia.org/wiki/Rotation_matrix

shader_type canvas_item;


uniform float strength: hint_range(0., 1.) = 0.5;
uniform float speed: hint_range(0., 10.) = 0.5;
uniform float angle: hint_range(0., 360.) = 0.;

void fragment() {
	float hue = UV.x * cos(radians(angle)) - UV.y * sin(radians(angle));
	hue = fract(hue + fract(TIME  * speed));
	float x = 1. - abs(mod(hue / (1./ 6.), 2.) - 1.);
	vec3 rainbow;
	if(hue < 1./6.){
		rainbow = vec3(1., x, 0.);
	} else if (hue < 1./3.) {
		rainbow = vec3(x, 1., 0);
	} else if (hue < 0.5) {
		rainbow = vec3(0, 1., x);
	} else if (hue < 2./3.) {
		rainbow = vec3(0., x, 1.);
	} else if (hue < 5./6.) {
		rainbow = vec3(x, 0., 1.);
	} else {
		rainbow = vec3(1., 0., x);
	}
	vec4 color = texture(TEXTURE, UV);
	COLOR = mix(color, vec4(rainbow, color.a), strength);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_lwdd6"]
resource_local_to_scene = true
shader = SubResource("Shader_1xk88")
shader_parameter/strength = 0.0
shader_parameter/speed = 0.5
shader_parameter/angle = 36.404

[node name="CI2E" type="Node" node_paths=PackedStringArray("pipe_target")]
script = ExtResource("1_1lgw2")
mode = 3
pipe_target = NodePath("PipeArea2")
level_music = ExtResource("2_5086k")
camera_left_end_position = 960
camera_top_end_position = -384

[node name="LevelBG" parent="." instance=ExtResource("2_b4qq5")]
main_texture = ExtResource("4_5fdwu")

[node name="Player" parent="." instance=ExtResource("5_3qax1")]
material = SubResource("ShaderMaterial_lwdd6")

[node name="TileMap" parent="." instance=ExtResource("7_hl8s4")]
layer_0/tile_data = PackedInt32Array(-2359331, 917504, 12, -2359330, 983040, 12, 131068, 393216, 13, 131069, 655360, 12, 131070, 655360, 12, 131071, 655360, 12, 65536, 655360, 12, 65537, 655360, 12, 65538, 655360, 12, 65539, 655360, 12, 65540, 655360, 12, 65541, 1048576, 13, 65542, 589824, 14, 65543, 589824, 14, 65544, 589824, 14, 65545, 589824, 14, 65546, 589824, 14, 65547, 589824, 14, 65548, 589824, 14, 65549, 589824, 14, 65550, 589824, 14, 65551, 589824, 14, 65552, 589824, 14, 65553, 589824, 14, 65554, 589824, 14, 65555, 589824, 14, 65556, 589824, 14, 65557, 589824, 14, 65558, 589824, 14, 65559, 589824, 14, 65560, 589824, 14, 65561, 851968, 13, 65562, 655360, 12, 65563, 655360, 12, 65564, 655360, 12, 65565, 655360, 12, 196604, 589824, 14, 196605, 589824, 14, 196606, 589824, 14, 196607, 589824, 14, 131072, 589824, 14, 131073, 589824, 14, 131074, 589824, 14, 131075, 589824, 14, 131076, 589824, 14, 131077, 589824, 14, 131078, 589824, 14, 131079, 589824, 14, 131080, 589824, 14, 131081, 589824, 14, 131082, 589824, 14, 131083, 589824, 14, 131084, 589824, 14, 131085, 589824, 14, 131086, 589824, 14, 131087, 589824, 14, 131088, 589824, 14, 131089, 589824, 14, 131090, 589824, 14, 131091, 589824, 14, 131092, 589824, 14, 131093, 589824, 14, 131094, 589824, 14, 131095, 589824, 14, 131096, 589824, 14, 131097, 589824, 14, 131098, 589824, 14, 131099, 589824, 14, 131100, 589824, 14, 131101, 589824, 14, 262140, 589824, 14, 262141, 589824, 14, 262142, 589824, 14, 262143, 589824, 14, 196608, 589824, 14, 196609, 589824, 14, 196610, 589824, 14, 196611, 589824, 14, 196612, 589824, 14, 196613, 589824, 14, 196614, 589824, 14, 196615, 589824, 14, 196616, 589824, 14, 196617, 589824, 14, 196618, 589824, 14, 196619, 589824, 14, 196620, 589824, 14, 196621, 589824, 14, 196622, 589824, 14, 196623, 589824, 14, 196624, 589824, 14, 196625, 589824, 14, 196626, 589824, 14, 196627, 589824, 14, 196628, 589824, 14, 196629, 589824, 14, 196630, 589824, 14, 196631, 589824, 14, 196632, 589824, 14, 196633, 589824, 14, 196634, 589824, 14, 196635, 589824, 14, 196636, 589824, 14, 196637, 589824, 14, 131067, 524288, 13, 196603, 524288, 13, 262139, 524288, 13, 327675, 524288, 15, 327676, 589824, 15, 327677, 589824, 15, 327678, 589824, 15, 327679, 589824, 15, 262144, 589824, 15, 262145, 589824, 15, 262146, 589824, 15, 262147, 589824, 15, 262148, 589824, 15, 262149, 589824, 15, 262150, 589824, 15, 262151, 589824, 15, 262152, 589824, 15, 262153, 589824, 15, 262154, 589824, 15, 262155, 589824, 15, 262156, 589824, 15, 262157, 589824, 15, 262158, 589824, 15, 262159, 589824, 15, 262160, 589824, 15, 262161, 589824, 15, 262162, 589824, 15, 262163, 589824, 15, 262164, 589824, 15, 262165, 589824, 15, 262166, 589824, 15, 262167, 589824, 15, 262168, 589824, 15, 262169, 589824, 15, 262170, 589824, 15, 262171, 589824, 15, 262172, 589824, 15, 262173, 589824, 15, 65566, 851968, 12, 65567, 589824, 14, 65568, 589824, 14, 65569, 589824, 14, 65570, 589824, 14, 65571, 589824, 14, 65572, 589824, 14, 65573, 589824, 14, 65574, 589824, 14, 65575, 589824, 14, 65576, 589824, 14, 65577, 589824, 14, 65578, 589824, 14, 65579, 589824, 14, 65580, 589824, 14, 65581, 589824, 14, 65582, 589824, 14, 65583, 589824, 14, 65584, 589824, 14, 65585, 589824, 14, 65586, 589824, 14, 131102, 589824, 14, 131103, 589824, 14, 131104, 589824, 14, 131105, 589824, 14, 131106, 589824, 14, 131107, 589824, 14, 131108, 589824, 14, 131109, 589824, 14, 131110, 589824, 14, 131111, 589824, 14, 131112, 589824, 14, 131113, 589824, 14, 131114, 589824, 14, 131115, 589824, 14, 131116, 589824, 14, 131117, 589824, 14, 131118, 589824, 14, 131119, 589824, 14, 131120, 589824, 14, 131121, 589824, 14, 131122, 589824, 14, 131123, 589824, 14, 131124, 589824, 14, 131125, 589824, 14, 196638, 589824, 14, 196639, 589824, 14, 196640, 589824, 14, 196641, 589824, 14, 196642, 589824, 14, 196643, 589824, 14, 196644, 589824, 14, 196645, 589824, 14, 196646, 589824, 14, 196647, 589824, 14, 196648, 589824, 14, 196649, 589824, 14, 196650, 589824, 14, 196651, 589824, 14, 196652, 589824, 14, 196653, 589824, 14, 196654, 589824, 14, 196655, 589824, 14, 196656, 589824, 14, 196657, 589824, 14, 196658, 589824, 14, 196659, 589824, 14, 196660, 589824, 14, 196661, 589824, 14, 131126, 589824, 14, 196662, 589824, 14, 262198, 589824, 15, 262174, 589824, 15, 262175, 589824, 15, 262176, 589824, 15, 262177, 589824, 15, 262178, 589824, 15, 262179, 589824, 15, 262180, 589824, 15, 262181, 589824, 15, 262182, 589824, 15, 262183, 589824, 15, 262184, 589824, 15, 262185, 589824, 15, 262186, 589824, 15, 262187, 589824, 15, 262188, 589824, 15, 262189, 589824, 15, 262190, 589824, 15, 262191, 589824, 15, 262192, 589824, 15, 262193, 589824, 15, 262194, 589824, 15, 262195, 589824, 15, 262196, 589824, 15, 262197, 589824, 15, 131127, 1048576, 12, 196663, 589824, 14, 131128, 655360, 12, 131129, 655360, 12, 131130, 655360, 12, 131131, 327680, 13, 196664, 589824, 14, 196665, 589824, 14, 196666, 589824, 14, 196667, 589824, 14, 262200, 589824, 15, 262201, 589824, 15, 262202, 589824, 15, 262203, 589824, 15, 262199, 589824, 15, -1572805, 524288, 12, -1572804, 655360, 12, -1572803, 720896, 12, -1507269, 524288, 13, -1507268, 589824, 14, -1507267, 720896, 14, -1441733, 524288, 13, -1441732, 589824, 14, -1441731, 720896, 14, -1376197, 524288, 13, -1376196, 589824, 14, -1376195, 720896, 14, -1310661, 524288, 13, -1310660, 589824, 14, -1310659, 720896, 14, -1245125, 524288, 13, -1245124, 589824, 14, -1245123, 720896, 14, -1179589, 524288, 13, -1179588, 589824, 14, -1179587, 720896, 14, -1114053, 524288, 13, -1114052, 589824, 14, -1114051, 720896, 14, -1048517, 524288, 13, -1048516, 589824, 14, -1048515, 720896, 14, -982981, 524288, 13, -982980, 589824, 14, -982979, 720896, 14, -917445, 524288, 13, -917444, 589824, 14, -917443, 720896, 14, -851909, 524288, 13, -851908, 589824, 14, -851907, 720896, 14, -786373, 524288, 13, -786372, 589824, 14, -786371, 720896, 14, -720837, 524288, 13, -720836, 589824, 14, -720835, 720896, 14, -655301, 524288, 13, -655300, 589824, 14, -655299, 720896, 14, -589765, 524288, 13, -589764, 589824, 14, -589763, 720896, 14, -524229, 524288, 13, -524228, 589824, 14, -524227, 720896, 14, -458693, 524288, 13, -458692, 589824, 14, -458691, 720896, 14, -393157, 524288, 13, -393156, 589824, 14, -393155, 720896, 14, -327621, 524288, 13, -327620, 589824, 14, -327619, 720896, 14, -262085, 524288, 13, -262084, 589824, 14, -262083, 720896, 14, -196549, 524288, 13, -196548, 589824, 14, -196547, 720896, 14, -131013, 524288, 13, -131012, 589824, 14, -131011, 720896, 14, -65477, 524288, 13, -65476, 589824, 14, -65475, 720896, 14, 59, 524288, 13, 60, 589824, 14, 61, 720896, 14, 65595, 524288, 13, 65596, 589824, 14, 65597, 720896, 14, 131132, 589824, 14, 131133, 720896, 14, 196668, 589824, 14, 196669, 720896, 14, 262204, 589824, 15, 262205, 720896, 15, 39, 589824, 14, 40, 1048576, 12, 41, 655360, 12, 42, 655360, 12, 43, 655360, 12, 44, 1048576, 13, 45, 589824, 14, 46, 589824, 14, 47, 589824, 14, 48, 589824, 14, 49, 589824, 14, 50, 589824, 14, 52, 917504, 12, 53, 983040, 12, -65491, 983040, 13, -65490, 1048576, 13, -65489, 589824, 14, -65488, 589824, 14, -65487, 1048576, 12, -65486, 917504, 12, -65492, 917504, 13, -131023, 983040, 12, -65505, 786432, 12, -65504, 851968, 12, -65503, 589824, 14, -65502, 589824, 14, -65501, 589824, 14, -65500, 589824, 14, -65499, 589824, 14, -65498, 1048576, 12, -65497, 917504, 12, -65496, 983040, 12, -131040, 786432, 12, -131039, 655360, 12, -131038, 655360, 12, -131037, 655360, 12, -131036, 655360, 12, 30, 786432, 12, 31, 851968, 12, 32, 589824, 14, 33, 589824, 14, 34, 589824, 14, 35, 589824, 14, 36, 589824, 14, 37, 589824, 14, 38, 589824, 14, 15, 589824, 14, 16, 589824, 14, 17, 589824, 14, 18, 589824, 14, 19, 589824, 14, 20, 589824, 14, 21, 589824, 14, 22, 589824, 14, 23, 589824, 14, 7, 1048576, 13, 8, 589824, 14, 9, 589824, 14, 10, 589824, 14, 11, 589824, 14, 12, 589824, 14, 13, 589824, 14, 14, 589824, 14, -65529, 917504, 13, -65528, 983040, 13, -65527, 655360, 12, -65526, 655360, 12, -65525, 655360, 12, -65524, 655360, 12, -65523, 1048576, 13, -65522, 589824, 14, -65521, 589824, 14, -65520, 589824, 14, -65519, 589824, 14, -65518, 589824, 14, -65517, 589824, 14, -65516, 1048576, 12, -65515, 655360, 12, -65514, 655360, 12, -65513, 655360, 12, -131056, 589824, 14, -131055, 589824, 14, -131054, 1048576, 12, -131053, 917504, 12, -131052, 983040, 12, -196593, 917504, 13, -196592, 983040, 13, -196591, 917504, 12, -196590, 983040, 12, 5, 917504, 13, 6, 983040, 13, -131059, 917504, 13, -131058, 983040, 13, -131057, 1048576, 13, -65512, 786432, 13, 24, 851968, 13, 25, 786432, 13, -131035, 917504, 12, -131034, 983040, 12, -131024, 917504, 12, -131025, 983040, 13, -131026, 917504, 13, 65591, 983040, 12, 65590, 917504, 12, 65589, 1048576, 12, 65588, 589824, 14, 65587, 589824, 14, 51, 1048576, 12, -65485, 983040, 12, -1507333, 524288, 12, -1507332, 720896, 12, -1441797, 524288, 13, -1441796, 720896, 14, -1376261, 524288, 13, -1376260, 720896, 14, -1310725, 524288, 13, -1310724, 720896, 14, -1245189, 524288, 13, -1245188, 720896, 14, -1179653, 524288, 13, -1179652, 720896, 14, -1114117, 524288, 13, -1114116, 720896, 14, -1048581, 524288, 13, -1048580, 720896, 14, -983045, 524288, 13, -983044, 720896, 14, -917509, 524288, 13, -917508, 720896, 14, -851973, 524288, 13, -851972, 720896, 14, -786437, 524288, 13, -786436, 720896, 14, -720901, 524288, 13, -720900, 720896, 14, -655365, 524288, 13, -655364, 720896, 14, -589829, 524288, 13, -589828, 720896, 14, -524293, 524288, 13, -524292, 720896, 14, -458757, 524288, 13, -458756, 720896, 14, -393221, 524288, 13, -393220, 720896, 14, -327685, 524288, 13, -327684, 720896, 14, -262149, 524288, 13, -262148, 720896, 14, -196613, 524288, 13, -196612, 720896, 14, -131077, 524288, 13, -131076, 720896, 14, -65541, 524288, 13, -65540, 720896, 14, -5, 524288, 13, -4, 131077, 2, 65531, 524288, 13, 65532, 131077, 3, -3, 196613, 2, 65533, 196613, 3, 57, 65541, 2, 65593, 65541, 3, 58, 131077, 2, 65594, 131077, 3)
layer_1/tile_data = PackedInt32Array(0, 9, 4, 1, 65545, 4, 2, 65545, 4, 3, 131081, 4, 26, 9, 4, 27, 65545, 4, 28, 131081, 4)

[node name="Ci2e" type="Sprite2D" parent="."]
modulate = Color(0.517184, 0.517184, 0.517184, 1)
z_index = -10
position = Vector2(-64, -384)
texture = ExtResource("10_8oofr")
centered = false

[node name="DinoRhino" parent="." instance=ExtResource("11_ndfno")]
position = Vector2(264, -48)

[node name="DinoRhino2" parent="." instance=ExtResource("11_ndfno")]
position = Vector2(208, -16)

[node name="DinoRhino3" parent="." instance=ExtResource("11_ndfno")]
position = Vector2(488, 0)

[node name="DinoRhino4" parent="." instance=ExtResource("11_ndfno")]
position = Vector2(648, -8)

[node name="DinoTorch" parent="." instance=ExtResource("12_ljj68")]
position = Vector2(840, 0)

[node name="DinoTorch2" parent="." instance=ExtResource("12_ljj68")]
position = Vector2(712, -8)

[node name="DinoTorch3" parent="." instance=ExtResource("12_ljj68")]
position = Vector2(384, -16)

[node name="DragonCoin" parent="." instance=ExtResource("13_3vxkn")]
position = Vector2(424, -80)

[node name="PipeArea" parent="." instance=ExtResource("14_86g4k")]
position = Vector2(-32, 0)
enter_direction = "Left"
pipe_id = 1
exit_only = true

[node name="PipeArea2" parent="." instance=ExtResource("14_86g4k")]
position = Vector2(912, 16)
enter_direction = "Right"

[node name="PasserbyItem" parent="." instance=ExtResource("15_a4xh3")]
position = Vector2(448, 8)
item = ExtResource("16_236xj")
