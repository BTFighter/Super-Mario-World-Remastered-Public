[gd_scene load_steps=16 format=4 uid="uid://cnof7e4ks4ln8"]

[ext_resource type="Script" path="res://Scripts/Classes/LevelClass.gd" id="1_rbwmr"]
[ext_resource type="AudioStream" uid="uid://jyjpswb5b2wv" path="res://Resources/MusicTracks/Bonus.tres" id="2_gm7j7"]
[ext_resource type="Texture2D" uid="uid://dvfvhwvpaua0n" path="res://Assets/LevelGuides/Level 0D7.png" id="2_pgtnp"]
[ext_resource type="PackedScene" uid="uid://c1xol3wby2j0k" path="res://Instances/Prefabs/level_bg.tscn" id="3_381tf"]
[ext_resource type="Texture2D" uid="uid://501o5v4tsfv0" path="res://Assets/Sprites/Backgrounds/Overworld/Clouds/Clouds1.png" id="5_l8el6"]
[ext_resource type="PackedScene" uid="uid://cqw1qs0bt5s4o" path="res://Instances/Prefabs/Player.tscn" id="6_2wicw"]
[ext_resource type="TileSet" uid="uid://b40euarkcv2yh" path="res://Resources/TileSets/Default.tres" id="9_6s24f"]
[ext_resource type="PackedScene" uid="uid://bh8jqegu0y5g7" path="res://Instances/Prefabs/Interactables/wooden_spin_platform.tscn" id="11_f0kym"]
[ext_resource type="PackedScene" uid="uid://cly5f6jt1cd28" path="res://Instances/Prefabs/Interactables/pipe_area.tscn" id="12_3g6so"]
[ext_resource type="PackedScene" uid="uid://cge612j26d8ws" path="res://Instances/Prefabs/autumn_level_bg.tscn" id="12_ab0ux"]
[ext_resource type="PackedScene" uid="uid://dhxpv4nmcs156" path="res://Instances/Prefabs/Interactables/moving_platform.tscn" id="12_xopnk"]
[ext_resource type="PackedScene" uid="uid://nldepcgj07xt" path="res://Instances/Prefabs/Items/dragon_coin.tscn" id="13_i004k"]
[ext_resource type="Texture2D" uid="uid://d0xffqsebrdfg" path="res://Assets/Sprites/Backgrounds/Overworld/Clouds2.png" id="14_vejrb"]

[sub_resource type="Shader" id="Shader_1xk88"]
code = "// HSV to RBG from https://www.rapidtables.com/convert/color/hsv-to-rgb.html
// Rotation matrix from https://en.wikipedia.org/wiki/Rotation_matrix

shader_type canvas_item;


uniform float strength: hint_range(0., 1.) = 0.5;
uniform float speed: hint_range(0., 10.) = 0.5;
uniform float angle: hint_range(0., 360.) = 0.;

void fragment() {
	float hue = UV.x * cos(radians(angle)) - UV.y * sin(radians(angle));
	hue = fract(hue + fract(TIME  * speed));
	float x = 1. - abs(mod(hue / (1./ 6.), 2.) - 1.);
	vec3 rainbow;
	if(hue < 1./6.){
		rainbow = vec3(1., x, 0.);
	} else if (hue < 1./3.) {
		rainbow = vec3(x, 1., 0);
	} else if (hue < 0.5) {
		rainbow = vec3(0, 1., x);
	} else if (hue < 2./3.) {
		rainbow = vec3(0., x, 1.);
	} else if (hue < 5./6.) {
		rainbow = vec3(x, 0., 1.);
	} else {
		rainbow = vec3(1., 0., x);
	}
	vec4 color = texture(TEXTURE, UV);
	COLOR = mix(color, vec4(rainbow, color.a), strength);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_gi7si"]
resource_local_to_scene = true
shader = SubResource("Shader_1xk88")
shader_parameter/strength = 0.0
shader_parameter/speed = 0.5
shader_parameter/angle = 36.404

[node name="CI3A" type="Node"]
script = ExtResource("1_rbwmr")
level_music = ExtResource("2_gm7j7")
camera_left_end_position = 448
camera_top_end_position = -368

[node name="Level0d7" type="Sprite2D" parent="."]
modulate = Color(0.41598, 0.41598, 0.41598, 1)
z_index = -10
position = Vector2(-64, -368)
texture = ExtResource("2_pgtnp")
centered = false

[node name="LevelBG" parent="." instance=ExtResource("3_381tf")]
main_texture = ExtResource("5_l8el6")
sky_colour = Color(0.972549, 0.878431, 0.690196, 1)

[node name="Player" parent="." instance=ExtResource("6_2wicw")]
material = SubResource("ShaderMaterial_gi7si")
position = Vector2(-32, -272)

[node name="WoodenSpinPlatform" parent="." instance=ExtResource("11_f0kym")]
position = Vector2(184, -184)

[node name="MovingPlatform" parent="." instance=ExtResource("12_xopnk")]
position = Vector2(88, -280)

[node name="Terrain" type="TileMapLayer" parent="."]
light_mask = 3
z_index = -1
use_parent_material = true
tile_map_data = PackedByteArray("AADd/9v/AAAOAAwAAADe/9v/AAAPAAwAAAD//wIAEwABAAAAAAAAAAIAEwAFAAAAAAABAAIAEwABAAEAAAACAAIAEwABAAEAAAADAAIAEwABAAEAAAAEAAIAEwABAAEAAAAFAAIAEwABAAEAAAAGAAIAEwAEAAEAAAAHAAIAEwABAAAAAAAIAAIAEwABAAAAAAAJAAIAEwABAAAAAAAKAAIAEwAFAAAAAAALAAIAEwABAAEAAAAMAAIAEwABAAEAAAANAAIAEwABAAEAAAAOAAIAEwABAAEAAAAPAAIAEwABAAEAAAAQAAIAEwAEAAEAAAARAAIAEwABAAAAAAASAAIAEwABAAAAAAD//wMAEwABAAEAAAAAAAMAEwABAAEAAAABAAMAEwABAAEAAAACAAMAEwABAAEAAAADAAMAEwABAAEAAAAEAAMAEwABAAEAAAAFAAMAEwABAAEAAAAGAAMAEwABAAEAAAAHAAMAEwABAAEAAAAIAAMAEwABAAEAAAAJAAMAEwABAAEAAAAKAAMAEwABAAEAAAALAAMAEwABAAEAAAAMAAMAEwABAAEAAAANAAMAEwABAAEAAAAOAAMAEwABAAEAAAAPAAMAEwABAAEAAAAQAAMAEwABAAEAAAARAAMAEwABAAEAAAASAAMAEwABAAEAAAATAAIAEwABAAAAAAAUAAIAEwAFAAAAAAAVAAIAEwABAAEAAAAWAAIAEwABAAEAAAAXAAIAEwABAAEAAAAYAAIAEwAAAAMAAAAZAAIAEwABAAAAAAAaAAIAEwABAAAAAAAbAAIAEwABAAMAAAATAAMAEwABAAEAAAAUAAMAEwABAAEAAAAVAAMAEwABAAEAAAAWAAMAEwABAAEAAAAXAAMAEwABAAEAAAAYAAMAEwABAAEAAAAZAAMAEwABAAEAAAAaAAMAEwABAAEAAAAbAAMAEwABAAEAAAATAAQAEwABAAEAAAAUAAQAEwABAAEAAAAVAAQAEwABAAEAAAAWAAQAEwABAAEAAAAXAAQAEwABAAEAAAAYAAQAEwABAAEAAAAZAAQAEwABAAEAAAAaAAQAEwABAAEAAAAbAAQAEwABAAEAAAD8/wQAEwABAAEAAAD9/wQAEwABAAEAAAD+/wQAEwABAAEAAAD//wQAEwABAAEAAAAAAAQAEwABAAEAAAABAAQAEwABAAEAAAACAAQAEwABAAEAAAADAAQAEwABAAEAAAAEAAQAEwABAAEAAAAFAAQAEwABAAEAAAAGAAQAEwABAAEAAAAHAAQAEwABAAEAAAAIAAQAEwABAAEAAAAJAAQAEwABAAEAAAAKAAQAEwABAAEAAAALAAQAEwABAAEAAAAMAAQAEwABAAEAAAANAAQAEwABAAEAAAAOAAQAEwABAAEAAAAPAAQAEwABAAEAAAAQAAQAEwABAAEAAAARAAQAEwABAAEAAAASAAQAEwABAAEAAAD8/wIAEwABAAAAAAD8/wMAEwABAAEAAAD9/wIAEwABAAAAAAD+/wIAEwABAAAAAAD9/wMAEwABAAEAAAD+/wMAEwABAAEAAAD7/wIAEwAAAAAAAAD7/wMAEwAAAAEAAAD7/wQAEwAAAAEAAAD7/wUAEwAAAAIAAAD8/wUAEwABAAIAAAD9/wUAEwABAAIAAAD+/wUAEwABAAIAAAD//wUAEwABAAIAAAAAAAUAEwABAAIAAAABAAUAEwABAAIAAAACAAUAEwABAAIAAAADAAUAEwABAAIAAAAEAAUAEwABAAIAAAAFAAUAEwABAAIAAAAGAAUAEwABAAIAAAAHAAUAEwABAAIAAAAIAAUAEwABAAIAAAAJAAUAEwABAAIAAAAKAAUAEwABAAIAAAALAAUAEwABAAIAAAAMAAUAEwABAAIAAAANAAUAEwABAAIAAAAOAAUAEwABAAIAAAAPAAUAEwABAAIAAAAQAAUAEwABAAIAAAARAAUAEwABAAIAAAASAAUAEwABAAIAAAATAAUAEwABAAIAAAAUAAUAEwABAAIAAAAVAAUAEwABAAIAAAAWAAUAEwABAAIAAAAXAAUAEwABAAIAAAAYAAUAEwABAAIAAAAZAAUAEwABAAIAAAAaAAUAEwABAAIAAAAbAAUAEwABAAIAAAAbAAAAEwAAAAAAAAAbAAEAEwAAAAEAAAAcAAAAEwACAAAAAAAcAAEAEwACAAEAAAAcAAIAEwACAAEAAAAcAAMAEwACAAEAAAAcAAQAEwACAAEAAAAcAAUAEwACAAIAAAAVAAAAEwAEAAAAAAAWAAAAEwABAAAAAAAXAAAAEwABAAAAAAAYAAAAEwACAAAAAAAUAAEAEwAEAAAAAAAVAAEAEwAFAAAAAAAWAAEAEwABAAEAAAAXAAEAEwABAAEAAAAYAAEAEwACAAEAAAAKAAEAEwAEAAAAAAALAAEAEwAFAAAAAAAMAAEAEwABAAEAAAANAAEAEwABAAEAAAAOAAEAEwABAAEAAAAPAAEAEwAEAAEAAAAQAAEAEwAFAAEAAAALAAAAEwAEAAAAAAAMAAAAEwABAAAAAAANAAAAEwABAAAAAAAOAAAAEwABAAAAAAAPAAAAEwAFAAEAAAAAAAEAEwAEAAAAAAABAAEAEwAFAAAAAAACAAEAEwABAAEAAAADAAEAEwABAAEAAAAEAAEAEwABAAEAAAAFAAEAEwAEAAEAAAAGAAEAEwAFAAEAAAABAAAAEwAEAAAAAAACAAAAEwABAAAAAAADAAAAEwABAAAAAAAEAAAAEwABAAAAAAAFAAAAEwAFAAEAAAAZAP7/BQAAAAAAAAAZAP//BQAAAAEAAAAaAP7/BQABAAAAAAAaAP//BQABAAEAAAAZAAAABQAAAAEAAAAaAAAABQABAAEAAAAZAAEABQAAAAEAAAAaAAEABQABAAEAAAD9/+//BQAMAAQAAAD9//D/BQAMAAUAAAD+/+//BQANAAQAAAD+//D/BQANAAUAAAD9//H/BQAMAAUAAAD+//H/BQANAAUAAAD9//L/BQAMAAUAAAD+//L/BQANAAUAAAD9//P/BQAMAAUAAAD+//P/BQANAAUAAAD9//T/BQAMAAUAAAD+//T/BQANAAUAAAD9//X/BQAMAAUAAAD+//X/BQANAAUAAAD9//b/BQAMAAUAAAD+//b/BQANAAUAAAD9//f/BQAMAAUAAAD+//f/BQANAAUAAAD9//j/BQAMAAUAAAD+//j/BQANAAUAAAD9//n/BQAMAAUAAAD+//n/BQANAAUAAAD9//r/BQAMAAUAAAD+//r/BQANAAUAAAD9//v/BQAMAAUAAAD+//v/BQANAAUAAAD9//z/BQAMAAUAAAD+//z/BQANAAUAAAD9//3/BQAMAAUAAAD+//3/BQANAAUAAAD9//7/BQAMAAUAAAD+//7/BQANAAUAAAD9////BQAMAAUAAAD+////BQANAAUAAAD9/wAABQAMAAUAAAD+/wAABQANAAUAAAD9/wEABQAMAAUAAAD+/wEABQANAAUAAAAEAO//DwAAAAAAAwAEAPD/DwAAAAAAAwAEAPH/DwAAAAAAAwAEAPL/DwAAAAAAAwAEAPP/DwAAAAAAAwAEAPT/DwAAAAAAAwAEAPX/DwAAAAAAAwAEAPb/DwAAAAAAAwAFAO//DwAAAAAAAwAFAPD/DwAAAAAAAwAFAPH/DwAAAAAAAwAFAPL/DwAAAAAAAwAFAPP/DwAAAAAAAwAFAPT/DwAAAAAAAwAFAPX/DwAAAAAAAwAFAPb/DwAAAAAAAwAGAO//DwAAAAAAAwAGAPD/DwAAAAAAAwAGAPH/DwAAAAAAAwAGAPL/DwAAAAAAAwAGAPP/DwAAAAAAAwAGAPT/DwAAAAAAAwAGAPX/DwAAAAAAAwAGAPb/DwAAAAAAAwAHAO//DwAAAAAAAwAHAPD/DwAAAAAAAwAHAPH/DwAAAAAAAwAHAPL/DwAAAAAAAwAHAPP/DwAAAAAAAwAHAPT/DwAAAAAAAwAHAPX/DwAAAAAAAwAHAPb/DwAAAAAAAwAIAO//DwAAAAAAAwAIAPD/DwAAAAAAAwAIAPH/DwAAAAAAAwAIAPL/DwAAAAAAAwAIAPP/DwAAAAAAAwAIAPT/DwAAAAAAAwAIAPX/DwAAAAAAAwAIAPb/DwAAAAAAAwAJAO//DwAAAAAAAwAJAPD/DwAAAAAAAwAJAPH/DwAAAAAAAwAJAPL/DwAAAAAAAwAJAPP/DwAAAAAAAwAJAPT/DwAAAAAAAwAJAPX/DwAAAAAAAwAJAPb/DwAAAAAAAwAKAO//DwAAAAAAAwAKAPD/DwAAAAAAAwAKAPH/DwAAAAAAAwAKAPL/DwAAAAAAAwAKAPb/DwAAAAAAAwALAO//DwAAAAAAAwALAPD/DwAAAAAAAwALAPH/DwAAAAAAAwALAPL/DwAAAAAAAwALAPb/DwAAAAAAAwAMAO//DwAAAAAAAwAMAPD/DwAAAAAAAwAMAPH/DwAAAAAAAwAMAPL/DwAAAAAAAwAMAPP/DwAAAAAAAwAMAPT/DwAAAAAAAwAMAPX/DwAAAAAAAwAMAPb/DwAAAAAAAwANAO//DwAAAAAAAwANAPD/DwAAAAAAAwANAPH/DwAAAAAAAwANAPL/DwAAAAAAAwANAPP/DwAAAAAAAwANAPT/DwAAAAAAAwANAPX/DwAAAAAAAwANAPb/DwAAAAAAAwAOAO//DwAAAAAAAwAOAPD/DwAAAAAAAwAOAPH/DwAAAAAAAwAOAPL/DwAAAAAAAwAOAPP/DwAAAAAAAwAOAPT/DwAAAAAAAwAOAPX/DwAAAAAAAwAOAPb/DwAAAAAAAwAPAO//DwAAAAAAAwAPAPD/DwAAAAAAAwAPAPH/DwAAAAAAAwAPAPL/DwAAAAAAAwAPAPP/DwAAAAAAAwAPAPT/DwAAAAAAAwAPAPX/DwAAAAAAAwAPAPb/DwAAAAAAAwAQAO//DwAAAAAAAwAQAPD/DwAAAAAAAwAQAPH/DwAAAAAAAwAQAPL/DwAAAAAAAwAQAPP/DwAAAAAAAwAQAPT/DwAAAAAAAwAQAPX/DwAAAAAAAwAQAPb/DwAAAAAAAwARAO//DwAAAAAAAwARAPD/DwAAAAAAAwARAPH/DwAAAAAAAwARAPL/DwAAAAAAAwARAPP/DwAAAAAAAwARAPT/DwAAAAAAAwARAPX/DwAAAAAAAwARAPb/DwAAAAAAAwASAO//DwAAAAAAAwASAPD/DwAAAAAAAwASAPH/DwAAAAAAAwASAPL/DwAAAAAAAwASAPP/DwAAAAAAAwASAPT/DwAAAAAAAwASAPX/DwAAAAAAAwASAPb/DwAAAAAAAwAHAPf/DwAAAAAAAwAHAPj/DwAAAAAAAwAIAPf/DwAAAAAAAwAIAPj/DwAAAAAAAwAJAPf/DwAAAAAAAwAJAPj/DwAAAAAAAwAKAPf/DwAAAAAAAwAKAPj/DwAAAAAAAwALAPf/DwAAAAAAAwALAPj/DwAAAAAAAwAMAPf/DwAAAAAAAwAMAPj/DwAAAAAAAwANAPf/DwAAAAAAAwANAPj/DwAAAAAAAwAOAPf/DwAAAAAAAwAOAPj/DwAAAAAAAwAPAPf/DwAAAAAAAwAPAPj/DwAAAAAAAwAHAOz/DwAAAAAAAwAHAO3/DwAAAAAAAwAHAO7/DwAAAAAAAwAIAOz/DwAAAAAAAwAIAO3/DwAAAAAAAwAIAO7/DwAAAAAAAwAJAOz/DwAAAAAAAwAJAO3/DwAAAAAAAwAJAO7/DwAAAAAAAwAKAOz/DwAAAAAAAwAKAO3/DwAAAAAAAwAKAO7/DwAAAAAAAwALAOz/DwAAAAAAAwALAO3/DwAAAAAAAwALAO7/DwAAAAAAAwAMAOz/DwAAAAAAAwAMAO3/DwAAAAAAAwAMAO7/DwAAAAAAAwANAOz/DwAAAAAAAwANAO3/DwAAAAAAAwANAO7/DwAAAAAAAwAOAOz/DwAAAAAAAwAOAO3/DwAAAAAAAwAOAO7/DwAAAAAAAwAPAOz/DwAAAAAAAwAPAO3/DwAAAAAAAwAPAO7/DwAAAAAAAwAKAPP/DwAAAAAAAwAKAPT/DwAAAAAAAwAKAPX/DwAAAAAAAwALAPP/DwAAAAAAAwALAPX/DwAAAAAAAwALAPT/CAABAAAAAAD7/+//CAADAAAAAAD7//D/CAADAAAAAAD7//H/CAADAAAAAAD7//L/CAADAAAAAAD7//P/CAADAAAAAAD7//T/CAADAAAAAAD7//X/CAADAAAAAAD7//b/CAADAAAAAAD7//f/CAADAAAAAAD7//j/CAADAAAAAAD7//n/CAADAAAAAAD7//r/CAADAAAAAAD7//v/CAADAAAAAAD7//z/CAADAAAAAAD7//3/CAADAAAAAAD7//7/CAADAAAAAAD7////CAADAAAAAAD7/wAACAADAAAAAAD7/wEACAADAAAAAAD7/+r/CAADAAAAAAD7/+v/CAADAAAAAAD7/+z/CAADAAAAAAD7/+3/CAADAAAAAAD7/+7/CAADAAAAAAD7/+n/CAADAAAAAAAcAOf/CAADAAAAAAAcAOj/CAADAAAAAAAcAOn/CAADAAAAAAAcAOr/CAADAAAAAAAcAOv/CAADAAAAAAAcAOz/CAADAAAAAAAcAO3/CAADAAAAAAAcAO7/CAADAAAAAAAcAO//CAADAAAAAAAcAPD/CAADAAAAAAAcAPH/CAADAAAAAAAcAPL/CAADAAAAAAAcAPP/CAADAAAAAAAcAPT/CAADAAAAAAAcAPX/CAADAAAAAAAcAPb/CAADAAAAAAAcAPf/CAADAAAAAAAcAPj/CAADAAAAAAAcAPn/CAADAAAAAAAcAPr/CAADAAAAAAAcAPv/CAADAAAAAAAcAPz/CAADAAAAAAAcAP3/CAADAAAAAAAcAP7/CAADAAAAAAAcAP//CAADAAAAAAAdAOf/CAADAAAAAAAdAOj/CAADAAAAAAAdAOn/CAADAAAAAAAdAOr/CAADAAAAAAAdAOv/CAADAAAAAAAdAOz/CAADAAAAAAAdAO3/CAADAAAAAAAdAO7/CAADAAAAAAAdAO//CAADAAAAAAAdAPD/CAADAAAAAAAdAPH/CAADAAAAAAAdAPL/CAADAAAAAAAdAPP/CAADAAAAAAAdAPT/CAADAAAAAAAdAPX/CAADAAAAAAAdAPb/CAADAAAAAAAdAPf/CAADAAAAAAAdAPj/CAADAAAAAAAdAPn/CAADAAAAAAAdAPr/CAADAAAAAAAdAPv/CAADAAAAAAAdAPz/CAADAAAAAAAdAP3/CAADAAAAAAAdAP7/CAADAAAAAAAdAP//CAADAAAAAAD7/+P/CAADAAAAAAD7/+T/CAADAAAAAAD7/+X/CAADAAAAAAD7/+b/CAADAAAAAAD7/+f/CAADAAAAAAAcAOP/CAADAAAAAAAcAOT/CAADAAAAAAAcAOX/CAADAAAAAAAcAOb/CAADAAAAAAAdAOP/CAADAAAAAAAdAOT/CAADAAAAAAAdAOX/CAADAAAAAAAdAOb/CAADAAAAAAD7/+j/CAADAAAAAAA=")
tile_set = ExtResource("9_6s24f")

[node name="SemiSolid1" type="TileMapLayer" parent="."]
z_index = -5
use_parent_material = true
tile_set = ExtResource("9_6s24f")

[node name="Layer2" type="TileMapLayer" parent="."]
z_index = -6
use_parent_material = true
tile_set = ExtResource("9_6s24f")

[node name="Layer3" type="TileMapLayer" parent="."]
z_index = -7
use_parent_material = true
tile_set = ExtResource("9_6s24f")

[node name="Layer4" type="TileMapLayer" parent="."]
z_index = -8
use_parent_material = true
tile_set = ExtResource("9_6s24f")

[node name="Layer5" type="TileMapLayer" parent="."]
z_index = -9
use_parent_material = true
tile_set = ExtResource("9_6s24f")

[node name="PipeArea" parent="." instance=ExtResource("12_3g6so")]
position = Vector2(-32, -272)
exit_only = true

[node name="PipeArea2" parent="." instance=ExtResource("12_3g6so")]
position = Vector2(416, -32)
level_scene = "res://Instances/Levels/ChocoIsland/ci_3.tscn"
pipe_id = 1

[node name="DragonCoin" parent="." instance=ExtResource("13_i004k")]
position = Vector2(328, -192)

[node name="AutumnLevelBG" parent="." node_paths=PackedStringArray("og_bg") instance=ExtResource("12_ab0ux")]
og_bg = NodePath("../LevelBG")
enable_leaves = false
enable_tint = true
main_texture = ExtResource("5_l8el6")
fg_texture = ExtResource("14_vejrb")
fg_scroll_speed = Vector2(32, 0)
