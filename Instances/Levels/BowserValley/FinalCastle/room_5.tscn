[gd_scene load_steps=12 format=3 uid="uid://dl5ai6napv8c"]

[ext_resource type="Script" uid="uid://k72dmo2yqq6n" path="res://Scripts/Classes/LevelClass.gd" id="1_00g04"]
[ext_resource type="AudioStream" uid="uid://tmquifk0xxio" path="res://Resources/MusicTracks/Fortress.tres" id="2_8ykuw"]
[ext_resource type="PackedScene" uid="uid://c1xol3wby2j0k" path="res://Instances/Prefabs/level_bg.tscn" id="3_8kjcq"]
[ext_resource type="Texture2D" uid="uid://davt5lojdugtx" path="res://Assets/Sprites/Backgrounds/Castle/Bricks.png" id="5_cfjuv"]
[ext_resource type="PackedScene" uid="uid://cqw1qs0bt5s4o" path="res://Instances/Prefabs/Player.tscn" id="6_fsdn5"]
[ext_resource type="PackedScene" uid="uid://dwavjbyw0v12l" path="res://Instances/Prefabs/tile_map.tscn" id="8_p68nn"]
[ext_resource type="PackedScene" uid="uid://bhpxe02its00p" path="res://Instances/Prefabs/Enemies/SpikePillarLong.tscn" id="8_r4bgd"]
[ext_resource type="PackedScene" uid="uid://d1kb7n60xn8m4" path="res://Instances/Prefabs/Enemies/thwomp.tscn" id="9_ps4ud"]
[ext_resource type="PackedScene" uid="uid://d3ay6d00er3ko" path="res://Instances/Prefabs/Interactables/door.tscn" id="10_juwf6"]

[sub_resource type="Shader" id="Shader_1xk88"]
code = "// HSV to RBG from https://www.rapidtables.com/convert/color/hsv-to-rgb.html
// Rotation matrix from https://en.wikipedia.org/wiki/Rotation_matrix

shader_type canvas_item;


uniform float strength: hint_range(0., 1.) = 0.5;
uniform float speed: hint_range(0., 10.) = 0.5;
uniform float angle: hint_range(0., 360.) = 0.;

void fragment() {
	float hue = UV.x * cos(radians(angle)) - UV.y * sin(radians(angle));
	hue = fract(hue + fract(TIME  * speed));
	float x = 1. - abs(mod(hue / (1./ 6.), 2.) - 1.);
	vec3 rainbow;
	if(hue < 1./6.){
		rainbow = vec3(1., x, 0.);
	} else if (hue < 1./3.) {
		rainbow = vec3(x, 1., 0);
	} else if (hue < 0.5) {
		rainbow = vec3(0, 1., x);
	} else if (hue < 2./3.) {
		rainbow = vec3(0., x, 1.);
	} else if (hue < 5./6.) {
		rainbow = vec3(x, 0., 1.);
	} else {
		rainbow = vec3(1., 0., x);
	}
	vec4 color = texture(TEXTURE, UV);
	COLOR = mix(color, vec4(rainbow, color.a), strength);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_iukdr"]
resource_local_to_scene = true
shader = SubResource("Shader_1xk88")
shader_parameter/strength = 0.0
shader_parameter/speed = 0.5
shader_parameter/angle = 36.404

[node name="Room5" type="Node"]
script = ExtResource("1_00g04")
level_music = ExtResource("2_8ykuw")
camera_left_end_position = 704
camera_top_end_position = -270

[node name="LevelBG" parent="." instance=ExtResource("3_8kjcq")]
main_texture = ExtResource("5_cfjuv")
sky_colour = Color(0, 0, 0, 1)

[node name="Player" parent="." instance=ExtResource("6_fsdn5")]
material = SubResource("ShaderMaterial_iukdr")
position = Vector2(-40, 0)

[node name="TileMap" parent="." instance=ExtResource("8_p68nn")]
layer_0/tile_data = PackedInt32Array(65532, 13, 0, 65533, 65549, 0, 65534, 65549, 0, 65535, 65549, 0, 0, 65549, 0, 1, 65549, 0, 2, 65549, 0, 3, 131085, 0, 131068, 13, 1, 131069, 65549, 1, 131070, 65549, 1, 131071, 65549, 1, 65536, 65549, 1, 65537, 65549, 1, 65538, 65549, 1, 65539, 131085, 1, 196604, 13, 2, 196605, 65549, 2, 196606, 65549, 2, 196607, 65549, 2, 131072, 65549, 2, 131073, 65549, 2, 131074, 65549, 2, 131075, 131085, 2, 11, 13, 0, 12, 65549, 0, 13, 65549, 0, 14, 131085, 0, 65547, 13, 1, 65548, 65549, 1, 65549, 65549, 1, 65550, 131085, 1, 131083, 13, 2, 131084, 65549, 2, 131085, 65549, 2, 131086, 131085, 2, 20, 13, 0, 21, 65549, 0, 22, 65549, 0, 23, 65549, 0, 24, 65549, 0, 25, 65549, 0, 26, 65549, 0, 27, 131085, 0, 65556, 13, 1, 65557, 65549, 1, 65558, 65549, 1, 65559, 65549, 1, 65560, 65549, 1, 65561, 65549, 1, 65562, 65549, 1, 65563, 131085, 1, 131092, 13, 2, 131093, 65549, 2, 131094, 65549, 2, 131095, 65549, 2, 131096, 65549, 2, 131097, 65549, 2, 131098, 65549, 2, 131099, 131085, 2, 31, 13, 0, 32, 65549, 0, 33, 65549, 0, 34, 65549, 0, 35, 131085, 0, 65567, 13, 1, 65568, 65549, 1, 65569, 65549, 1, 65570, 65549, 1, 65571, 131085, 1, 131103, 13, 2, 131104, 65549, 2, 131105, 65549, 2, 131106, 65549, 2, 131107, 131085, 2, -655318, 13, 1, -655317, 131085, 1, -589782, 13, 1, -589781, 131085, 1, -524246, 13, 1, -524245, 131085, 1, -458710, 13, 1, -458709, 131085, 1, -393174, 13, 1, -393173, 131085, 1, -327638, 13, 1, -327637, 131085, 1, -262102, 13, 1, -262101, 131085, 1, -196566, 13, 1, -196565, 131085, 1, -131030, 13, 1, -131029, 131085, 1, -65494, 13, 2, -65493, 131085, 2, -917462, 13, 0, -917461, 131085, 0, -851926, 13, 1, -851925, 131085, 1, -786390, 13, 1, -786389, 131085, 1, -720854, 13, 1, -720853, 131085, 1, -917472, 13, 0, -917471, 131085, 0, -851936, 13, 1, -851935, 131085, 1, -786400, 13, 1, -786399, 131085, 1, -720864, 13, 2, -720863, 131085, 2, -917476, 13, 0, -917475, 131085, 0, -851940, 13, 1, -851939, 131085, 1, -786404, 13, 1, -786403, 131085, 1, -720868, 13, 2, -720867, 131085, 2, -917480, 13, 0, -917479, 131085, 0, -851944, 13, 1, -851943, 131085, 1, -786408, 13, 1, -786407, 131085, 1, -720872, 13, 2, -720871, 131085, 2, -917484, 13, 0, -917483, 131085, 0, -851948, 13, 1, -851947, 131085, 1, -786412, 13, 1, -786411, 131085, 1, -720876, 13, 2, -720875, 131085, 2, -917488, 13, 0, -917487, 131085, 0, -851952, 13, 1, -851951, 131085, 1, -786416, 13, 1, -786415, 131085, 1, -720880, 13, 2, -720879, 131085, 2, -917492, 13, 0, -917491, 131085, 0, -851956, 13, 1, -851955, 131085, 1, -786420, 13, 1, -786419, 131085, 1, -720884, 13, 2, -720883, 131085, 2, -917496, 13, 0, -917495, 131085, 0, -851960, 13, 1, -851959, 131085, 1, -786424, 13, 1, -786423, 131085, 1, -720888, 13, 2, -720887, 131085, 2, -917500, 13, 0, -917499, 131085, 0, -851964, 13, 1, -851963, 131085, 1, -786428, 13, 1, -786427, 131085, 1, -720892, 13, 2, -720891, 131085, 2)
layer_1/z_index = -1
layer_1/tile_data = PackedInt32Array(4, 13, 0, 5, 65549, 0, 6, 65549, 0, 7, 65549, 0, 8, 65549, 0, 9, 65549, 0, 10, 131085, 0, 65540, 13, 1, 65541, 65549, 1, 65542, 65549, 1, 65543, 65549, 1, 65544, 65549, 1, 65545, 65549, 1, 65546, 131085, 1, 131076, 13, 2, 131077, 65549, 2, 131078, 65549, 2, 131079, 65549, 2, 131080, 65549, 2, 131081, 65549, 2, 131082, 131085, 2, 15, 13, 0, 16, 65549, 0, 17, 65549, 0, 18, 65549, 0, 19, 131085, 0, 65551, 13, 1, 65552, 65549, 1, 65553, 65549, 1, 65554, 65549, 1, 65555, 131085, 1, 131087, 13, 2, 131088, 65549, 2, 131089, 65549, 2, 131090, 65549, 2, 131091, 131085, 2, 28, 13, 0, 29, 65549, 0, 30, 131085, 0, 65564, 13, 1, 65565, 65549, 1, 65566, 131085, 1, 131100, 13, 2, 131101, 65549, 2, 131102, 131085, 2, 36, 13, 0, 37, 65549, 0, 38, 65549, 0, 39, 65549, 0, 40, 65549, 0, 41, 65549, 0, 42, 65549, 0, 43, 131085, 0, 65572, 13, 1, 65573, 65549, 1, 65574, 65549, 1, 65575, 65549, 1, 65576, 65549, 1, 65577, 65549, 1, 65578, 65549, 1, 65579, 131085, 1, 131108, 13, 2, 131109, 65549, 2, 131110, 65549, 2, 131111, 65549, 2, 131112, 65549, 2, 131113, 65549, 2, 131114, 65549, 2, 131115, 131085, 2, -917470, 13, 0, -917469, 65549, 0, -917468, 65549, 0, -917467, 65549, 0, -917466, 65549, 0, -917465, 65549, 0, -917464, 65549, 0, -917463, 131085, 0, -851934, 13, 1, -851933, 65549, 1, -851932, 65549, 1, -851931, 65549, 1, -851930, 65549, 1, -851929, 65549, 1, -851928, 65549, 1, -851927, 131085, 1, -786398, 13, 1, -786397, 65549, 1, -786396, 65549, 1, -786395, 65549, 1, -786394, 65549, 1, -786393, 65549, 1, -786392, 65549, 1, -786391, 131085, 1, -720862, 13, 1, -720861, 65549, 1, -720860, 65549, 1, -720859, 65549, 1, -720858, 65549, 1, -720857, 65549, 1, -720856, 65549, 1, -720855, 131085, 1, -655326, 13, 1, -655325, 65549, 1, -655324, 65549, 1, -655323, 65549, 1, -655322, 65549, 1, -655321, 65549, 1, -655320, 65549, 1, -655319, 131085, 1, -589790, 13, 2, -589789, 65549, 2, -589788, 65549, 2, -589787, 65549, 2, -589786, 65549, 2, -589785, 65549, 2, -589784, 65549, 2, -589783, 131085, 2, -917474, 13, 0, -917473, 131085, 0, -851938, 13, 1, -851937, 131085, 1, -786402, 13, 1, -786401, 131085, 1, -720866, 13, 1, -720865, 131085, 1, -655330, 13, 1, -655329, 131085, 1, -589794, 13, 2, -589793, 131085, 2, -917478, 13, 0, -917477, 131085, 0, -851942, 13, 1, -851941, 131085, 1, -786406, 13, 1, -786405, 131085, 1, -720870, 13, 1, -720869, 131085, 1, -655334, 13, 1, -655333, 131085, 1, -589798, 13, 2, -589797, 131085, 2, -851946, 13, 1, -851945, 131085, 1, -786410, 13, 1, -786409, 131085, 1, -720874, 13, 1, -720873, 131085, 1, -655338, 13, 1, -655337, 131085, 1, -589802, 13, 2, -589801, 131085, 2, -917482, 13, 0, -917481, 131085, 0, -917486, 13, 0, -917485, 131085, 0, -851950, 13, 1, -851949, 131085, 1, -786414, 13, 1, -786413, 131085, 1, -720878, 13, 1, -720877, 131085, 1, -655342, 13, 1, -655341, 131085, 1, -589806, 13, 2, -589805, 131085, 2, -917490, 13, 0, -917489, 131085, 0, -851954, 13, 1, -851953, 131085, 1, -786418, 13, 1, -786417, 131085, 1, -720882, 13, 1, -720881, 131085, 1, -655346, 13, 1, -655345, 131085, 1, -589810, 13, 2, -589809, 131085, 2, -917494, 13, 0, -917493, 131085, 0, -851958, 13, 1, -851957, 131085, 1, -786422, 13, 1, -786421, 131085, 1, -720886, 13, 1, -720885, 131085, 1, -655350, 13, 1, -655349, 131085, 1, -589814, 13, 2, -589813, 131085, 2, -917498, 13, 0, -917497, 131085, 0, -851962, 13, 1, -851961, 131085, 1, -786426, 13, 1, -786425, 131085, 1, -720890, 13, 1, -720889, 131085, 1, -655354, 13, 1, -655353, 131085, 1, -589818, 13, 2, -589817, 131085, 2, -851972, 13, 0, -851971, 65549, 0, -851970, 65549, 0, -851969, 65549, 0, -917504, 65549, 0, -917503, 65549, 0, -917502, 65549, 0, -917501, 131085, 0, -786436, 13, 1, -786435, 65549, 1, -786434, 65549, 1, -786433, 65549, 1, -851968, 65549, 1, -851967, 65549, 1, -851966, 65549, 1, -851965, 131085, 1, -720900, 13, 1, -720899, 65549, 1, -720898, 65549, 1, -720897, 65549, 1, -786432, 65549, 1, -786431, 65549, 1, -786430, 65549, 1, -786429, 131085, 1, -655364, 13, 1, -655363, 65549, 1, -655362, 65549, 1, -655361, 65549, 1, -720896, 65549, 1, -720895, 65549, 1, -720894, 65549, 1, -720893, 131085, 1, -589828, 13, 1, -589827, 65549, 1, -589826, 65549, 1, -589825, 65549, 1, -655360, 65549, 1, -655359, 65549, 1, -655358, 65549, 1, -655357, 131085, 1, -524292, 13, 2, -524291, 65549, 2, -524290, 65549, 2, -524289, 65549, 2, -589824, 65549, 2, -589823, 65549, 2, -589822, 65549, 2, -589821, 131085, 2)

[node name="LevelGuide" type="Sprite2D" parent="."]
modulate = Color(0.411765, 0.411765, 0.411765, 1)
z_index = -10
position = Vector2(-64, -384)
centered = false

[node name="Thwomp" parent="." instance=ExtResource("9_ps4ud")]
position = Vector2(80, -128)

[node name="Thwomp2" parent="." instance=ExtResource("9_ps4ud")]
position = Vector2(144, -128)

[node name="Thwomp3" parent="." instance=ExtResource("9_ps4ud")]
position = Vector2(208, -128)

[node name="Thwomp4" parent="." instance=ExtResource("9_ps4ud")]
position = Vector2(272, -128)

[node name="Thwomp5" parent="." instance=ExtResource("9_ps4ud")]
position = Vector2(336, -128)

[node name="Thwomp6" parent="." instance=ExtResource("9_ps4ud")]
position = Vector2(400, -128)

[node name="Thwomp7" parent="." instance=ExtResource("9_ps4ud")]
position = Vector2(464, -128)

[node name="Thwomp8" parent="." instance=ExtResource("9_ps4ud")]
position = Vector2(528, -128)

[node name="Door" parent="." instance=ExtResource("10_juwf6")]
position = Vector2(648, 0)
level_scene = "res://Instances/Levels/BowserValley/FinalCastle/final_hall.tscn"

[node name="Pillar" parent="." instance=ExtResource("8_r4bgd")]
position = Vector2(48, -272)

[node name="Pillar2" parent="." instance=ExtResource("8_r4bgd")]
position = Vector2(112, -288)

[node name="Pillar3" parent="." instance=ExtResource("8_r4bgd")]
position = Vector2(176, -304)

[node name="Pillar4" parent="." instance=ExtResource("8_r4bgd")]
position = Vector2(240, -320)

[node name="Pillar5" parent="." instance=ExtResource("8_r4bgd")]
position = Vector2(304, -336)

[node name="Pillar6" parent="." instance=ExtResource("8_r4bgd")]
position = Vector2(368, -352)

[node name="Pillar7" parent="." instance=ExtResource("8_r4bgd")]
position = Vector2(432, -368)

[node name="Pillar8" parent="." instance=ExtResource("8_r4bgd")]
position = Vector2(496, -384)

[node name="Pillar9" parent="." instance=ExtResource("8_r4bgd")]
position = Vector2(560, -400)
