[gd_scene load_steps=20 format=3 uid="uid://cqck5m8d8tsit"]

[ext_resource type="Script" path="res://Scripts/Classes/LevelClass.gd" id="1_yvgt0"]
[ext_resource type="AudioStream" uid="uid://d2mfwfapwilqw" path="res://Resources/MusicTracks/GhostHouse.tres" id="2_237ge"]
[ext_resource type="PackedScene" uid="uid://dwavjbyw0v12l" path="res://Instances/Prefabs/tile_map.tscn" id="2_k6jc4"]
[ext_resource type="PackedScene" uid="uid://cqw1qs0bt5s4o" path="res://Instances/Prefabs/Player.tscn" id="3_x5t7n"]
[ext_resource type="Texture2D" uid="uid://d0nbee6rrd3g5" path="res://Assets/LevelGuides/Level 0DE.png" id="5_r24k6"]
[ext_resource type="PackedScene" uid="uid://dm7exbyvtd2fw" path="res://Instances/Prefabs/Blocks/spin_block.tscn" id="6_6gd37"]
[ext_resource type="PackedScene" uid="uid://dmie715ocubk5" path="res://Instances/Parts/vine_plant.tscn" id="7_cill0"]
[ext_resource type="PackedScene" uid="uid://d3ay6d00er3ko" path="res://Instances/Prefabs/Interactables/door.tscn" id="8_at63k"]
[ext_resource type="PackedScene" uid="uid://by30pjmweajmu" path="res://Instances/Prefabs/Enemies/boo.tscn" id="9_bmvmd"]
[ext_resource type="PackedScene" uid="uid://c1xol3wby2j0k" path="res://Instances/Prefabs/level_bg.tscn" id="10_vfaw7"]
[ext_resource type="Texture2D" uid="uid://crq1u7c62kpnk" path="res://Assets/Sprites/Backgrounds/GhostHouse/BG5.png" id="11_r71g8"]
[ext_resource type="PackedScene" uid="uid://nldepcgj07xt" path="res://Instances/Prefabs/Items/dragon_coin.tscn" id="12_xscbm"]

[sub_resource type="Shader" id="Shader_1xk88"]
code = "// HSV to RBG from https://www.rapidtables.com/convert/color/hsv-to-rgb.html
// Rotation matrix from https://en.wikipedia.org/wiki/Rotation_matrix

shader_type canvas_item;


uniform float strength: hint_range(0., 1.) = 0.5;
uniform float speed: hint_range(0., 10.) = 0.5;
uniform float angle: hint_range(0., 360.) = 0.;

void fragment() {
	float hue = UV.x * cos(radians(angle)) - UV.y * sin(radians(angle));
	hue = fract(hue + fract(TIME  * speed));
	float x = 1. - abs(mod(hue / (1./ 6.), 2.) - 1.);
	vec3 rainbow;
	if(hue < 1./6.){
		rainbow = vec3(1., x, 0.);
	} else if (hue < 1./3.) {
		rainbow = vec3(x, 1., 0);
	} else if (hue < 0.5) {
		rainbow = vec3(0, 1., x);
	} else if (hue < 2./3.) {
		rainbow = vec3(0., x, 1.);
	} else if (hue < 5./6.) {
		rainbow = vec3(x, 0., 1.);
	} else {
		rainbow = vec3(1., 0., x);
	}
	vec4 color = texture(TEXTURE, UV);
	COLOR = mix(color, vec4(rainbow, color.a), strength);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_efyl1"]
resource_local_to_scene = true
shader = SubResource("Shader_1xk88")
shader_parameter/strength = 0.0
shader_parameter/speed = 0.5
shader_parameter/angle = 36.404

[sub_resource type="AtlasTexture" id="AtlasTexture_83nnt"]
atlas = ExtResource("11_r71g8")
region = Rect2(0, 0, 512, 432)

[sub_resource type="AtlasTexture" id="AtlasTexture_w8831"]
atlas = ExtResource("11_r71g8")
region = Rect2(512, 0, 512, 432)

[sub_resource type="AtlasTexture" id="AtlasTexture_87uua"]
atlas = ExtResource("11_r71g8")
region = Rect2(1024, 0, 512, 432)

[sub_resource type="AtlasTexture" id="AtlasTexture_2japy"]
atlas = ExtResource("11_r71g8")
region = Rect2(1536, 0, 512, 432)

[sub_resource type="SpriteFrames" id="SpriteFrames_uh0cr"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_83nnt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w8831")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_87uua")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2japy")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="DPHB" type="Node"]
script = ExtResource("1_yvgt0")
level_music = ExtResource("2_237ge")
camera_left_end_position = 464
camera_top_end_position = -384

[node name="TileMap" parent="." instance=ExtResource("2_k6jc4")]
layer_0/tile_data = PackedInt32Array(65532, 11, 0, 65533, 65547, 0, 3, 65547, 0, 4, 131083, 0, -65527, 11, 0, -65526, 65547, 0, -65514, 65547, 0, -65513, 131083, 0, -393205, 11, 0, -393204, 65547, 0, -393203, 131083, 0, -393201, 11, 0, -393200, 65547, 0, -393191, 65547, 0, -393190, 131083, 0, -65525, 65547, 0, -65524, 65547, 0, -65523, 65547, 0, -65522, 65547, 0, -65521, 65547, 0, -65520, 65547, 0, -65519, 65547, 0, -65518, 65547, 0, -65517, 65547, 0, -65516, 65547, 0, -65515, 65547, 0, -393199, 65547, 0, -393198, 65547, 0, -393197, 65547, 0, -393196, 65547, 0, -393195, 65547, 0, -393194, 65547, 0, -393193, 65547, 0, -393192, 65547, 0, 65534, 65547, 0, 65535, 65547, 0, 0, 65547, 0, 1, 65547, 0, 2, 65547, 0, -65531, 262155, 0, 5, 262155, 1, -131066, 262155, 0, -65530, 262155, 1, -196601, 262155, 0, -131065, 262155, 1, -262136, 262155, 0, -196600, 262155, 1, -327671, 262155, 0, -262135, 262155, 1, -393206, 262155, 0, -327670, 262155, 1, 131069, 327691, 0, 196605, 327691, 1, 65539, 327691, 0, 131075, 327691, 1, 10, 327691, 0, 65546, 327691, 1, 14, 327691, 0, 65550, 327691, 1, 18, 327691, 0, 65554, 327691, 1, 22, 327691, 0, 65558, 327691, 1, -327655, 327691, 0, -262119, 327691, 1, -327664, 327691, 0, -262128, 327691, 1, -327668, 327691, 0, -262132, 327691, 1, -196596, 327691, 1, -131060, 327691, 1, -196592, 327691, 1, -131056, 327691, 1, -196583, 327691, 1, -131047, 327691, 1, -65511, 327691, 1, 25, 327691, 1, 65561, 327691, 1, 131097, 327691, 1, 131094, 327691, 1, 131090, 327691, 1, 131086, 327691, 1, 131082, 327691, 1, -786405, 11, 1, -786404, 65547, 1, -720869, 11, 1, -720868, 65547, 1, -655333, 11, 1, -655332, 65547, 1, -589797, 11, 1, -589796, 65547, 1, -524261, 11, 1, -524260, 65547, 1, -458725, 11, 1, -458724, 65547, 1, -393189, 11, 1, -393188, 65547, 1, -327653, 11, 1, -327652, 65547, 1, -262117, 11, 1, -262116, 65547, 1, -196581, 11, 1, -196580, 65547, 1, -131045, 11, 1, -131044, 65547, 1, -65509, 11, 1, -65508, 65547, 1, 27, 11, 1, 28, 65547, 1, 65563, 11, 1, 65564, 65547, 1, 131099, 11, 1, 131100, 65547, 1, -1572837, 11, 1, -1572836, 65547, 1, -1507301, 11, 1, -1507300, 65547, 1, -1441765, 11, 1, -1441764, 65547, 1, -1376229, 11, 1, -1376228, 65547, 1, -1310693, 11, 1, -1310692, 65547, 1, -1245157, 11, 1, -1245156, 65547, 1, -1179621, 11, 1, -1179620, 65547, 1, -1114085, 11, 1, -1114084, 65547, 1, -1048549, 11, 1, -1048548, 65547, 1, -983013, 11, 1, -983012, 65547, 1, -917477, 11, 1, -917476, 65547, 1, -851941, 11, 1, -851940, 65547, 1, -1572835, 262155, 2, -1507299, 262155, 2, -1441763, 262155, 2, -1376227, 262155, 2, -1310691, 262155, 2, -1245155, 262155, 2, -1179619, 262155, 2, -1114083, 262155, 2, -1048547, 262155, 2, -983011, 262155, 2, -917475, 262155, 2, -851939, 262155, 2, -786403, 262155, 2, -720867, 262155, 2, -655331, 262155, 2, -589795, 262155, 2, -524259, 262155, 2, -458723, 262155, 2, -393187, 262155, 2, -327651, 262155, 2, -262115, 262155, 2, -196579, 262155, 2, -131043, 262155, 2, -65507, 262155, 2, 29, 262155, 2, 65565, 262155, 2, 131101, 262155, 2, -1572834, 262155, 2, -1507298, 262155, 2, -1441762, 262155, 2, -1376226, 262155, 2, -1310690, 262155, 2, -1245154, 262155, 2, -1179618, 262155, 2, -1114082, 262155, 2, -1048546, 262155, 2, -983010, 262155, 2, -917474, 262155, 2, -851938, 262155, 2, -786402, 262155, 2, -720866, 262155, 2, -655330, 262155, 2, -589794, 262155, 2, -524258, 262155, 2, -458722, 262155, 2, -393186, 262155, 2, -327650, 262155, 2, -262114, 262155, 2, -196578, 262155, 2, -131042, 262155, 2, -65506, 262155, 2, 30, 262155, 2, 65566, 262155, 2, 131102, 262155, 2, -1572833, 262155, 2, -1507297, 262155, 2, -1441761, 262155, 2, -1376225, 262155, 2, -1310689, 262155, 2, -1245153, 262155, 2, -1179617, 262155, 2, -1114081, 262155, 2, -1048545, 262155, 2, -983009, 262155, 2, -917473, 262155, 2, -851937, 262155, 2, -786401, 262155, 2, -720865, 262155, 2, -655329, 262155, 2, -589793, 262155, 2, -524257, 262155, 2, -458721, 262155, 2, -393185, 262155, 2, -327649, 262155, 2, -262113, 262155, 2, -196577, 262155, 2, -131041, 262155, 2, -65505, 262155, 2, 31, 262155, 2, 65567, 262155, 2, 131103, 262155, 2, -1572832, 262155, 2, -1507296, 262155, 2, -1441760, 262155, 2, -1376224, 262155, 2, -1310688, 262155, 2, -1245152, 262155, 2, -1179616, 262155, 2, -1114080, 262155, 2, -1048544, 262155, 2, -983008, 262155, 2, -917472, 262155, 2, -851936, 262155, 2, -786400, 262155, 2, -720864, 262155, 2, -655328, 262155, 2, -589792, 262155, 2, -524256, 262155, 2, -458720, 262155, 2, -393184, 262155, 2, -327648, 262155, 2, -262112, 262155, 2, -196576, 262155, 2, -131040, 262155, 2, -65504, 262155, 2, 32, 262155, 2, 65568, 262155, 2, 131104, 262155, 2, -1572831, 262155, 2, -1507295, 262155, 2, -1441759, 262155, 2, -1376223, 262155, 2, -1310687, 262155, 2, -1245151, 262155, 2, -1179615, 262155, 2, -1114079, 262155, 2, -1048543, 262155, 2, -983007, 262155, 2, -917471, 262155, 2, -851935, 262155, 2, -786399, 262155, 2, -720863, 262155, 2, -655327, 262155, 2, -589791, 262155, 2, -524255, 262155, 2, -458719, 262155, 2, -393183, 262155, 2, -327647, 262155, 2, -262111, 262155, 2, -196575, 262155, 2, -131039, 262155, 2, -65503, 262155, 2, 33, 262155, 2, 65569, 262155, 2, 131105, 262155, 2, -1572830, 262155, 2, -1507294, 262155, 2, -1441758, 262155, 2, -1376222, 262155, 2, -1310686, 262155, 2, -1245150, 262155, 2, -1179614, 262155, 2, -1114078, 262155, 2, -1048542, 262155, 2, -983006, 262155, 2, -917470, 262155, 2, -851934, 262155, 2, -786398, 262155, 2, -720862, 262155, 2, -655326, 262155, 2, -589790, 262155, 2, -524254, 262155, 2, -458718, 262155, 2, -393182, 262155, 2, -327646, 262155, 2, -262110, 262155, 2, -196574, 262155, 2, -131038, 262155, 2, -65502, 262155, 2, 34, 262155, 2, 65570, 262155, 2, 131106, 262155, 2, -1572829, 262155, 2, -1507293, 262155, 2, -1441757, 262155, 2, -1376221, 262155, 2, -1310685, 262155, 2, -1245149, 262155, 2, -1179613, 262155, 2, -1114077, 262155, 2, -1048541, 262155, 2, -983005, 262155, 2, -917469, 262155, 2, -851933, 262155, 2, -786397, 262155, 2, -720861, 262155, 2, -655325, 262155, 2, -589789, 262155, 2, -524253, 262155, 2, -458717, 262155, 2, -393181, 262155, 2, -327645, 262155, 2, -262109, 262155, 2, -196573, 262155, 2, -131037, 262155, 2, -65501, 262155, 2, 35, 262155, 2, 65571, 262155, 2, 131107, 262155, 2, -1572828, 262155, 2, -1507292, 262155, 2, -1441756, 262155, 2, -1376220, 262155, 2, -1310684, 262155, 2, -1245148, 262155, 2, -1179612, 262155, 2, -1114076, 262155, 2, -1048540, 262155, 2, -983004, 262155, 2, -917468, 262155, 2, -851932, 262155, 2, -786396, 262155, 2, -720860, 262155, 2, -655324, 262155, 2, -589788, 262155, 2, -524252, 262155, 2, -458716, 262155, 2, -393180, 262155, 2, -327644, 262155, 2, -262108, 262155, 2, -196572, 262155, 2, -131036, 262155, 2, -65500, 262155, 2, 36, 262155, 2, 65572, 262155, 2, 131108, 262155, 2, -1572827, 262155, 2, -1507291, 262155, 2, -1441755, 262155, 2, -1376219, 262155, 2, -1310683, 262155, 2, -1245147, 262155, 2, -1179611, 262155, 2, -1114075, 262155, 2, -1048539, 262155, 2, -983003, 262155, 2, -917467, 262155, 2, -851931, 262155, 2, -786395, 262155, 2, -720859, 262155, 2, -655323, 262155, 2, -589787, 262155, 2, -524251, 262155, 2, -458715, 262155, 2, -393179, 262155, 2, -327643, 262155, 2, -262107, 262155, 2, -196571, 262155, 2, -131035, 262155, 2, -65499, 262155, 2, 37, 262155, 2, 65573, 262155, 2, 131109, 262155, 2, -1572826, 262155, 2, -1507290, 262155, 2, -1441754, 262155, 2, -1376218, 262155, 2, -1310682, 262155, 2, -1245146, 262155, 2, -1179610, 262155, 2, -1114074, 262155, 2, -1048538, 262155, 2, -983002, 262155, 2, -917466, 262155, 2, -851930, 262155, 2, -786394, 262155, 2, -720858, 262155, 2, -655322, 262155, 2, -589786, 262155, 2, -524250, 262155, 2, -458714, 262155, 2, -393178, 262155, 2, -327642, 262155, 2, -262106, 262155, 2, -196570, 262155, 2, -131034, 262155, 2, -65498, 262155, 2, 38, 262155, 2, 65574, 262155, 2, 131110, 262155, 2, -1572825, 262155, 2, -1507289, 262155, 2, -1441753, 262155, 2, -1376217, 262155, 2, -1310681, 262155, 2, -1245145, 262155, 2, -1179609, 262155, 2, -1114073, 262155, 2, -1048537, 262155, 2, -983001, 262155, 2, -917465, 262155, 2, -851929, 262155, 2, -786393, 262155, 2, -720857, 262155, 2, -655321, 262155, 2, -589785, 262155, 2, -524249, 262155, 2, -458713, 262155, 2, -393177, 262155, 2, -327641, 262155, 2, -262105, 262155, 2, -196569, 262155, 2, -131033, 262155, 2, -65497, 262155, 2, 39, 262155, 2, 65575, 262155, 2, 131111, 262155, 2, -1572824, 262155, 2, -1507288, 262155, 2, -1441752, 262155, 2, -1376216, 262155, 2, -1310680, 262155, 2, -1245144, 262155, 2, -1179608, 262155, 2, -1114072, 262155, 2, -1048536, 262155, 2, -983000, 262155, 2, -917464, 262155, 2, -851928, 262155, 2, -786392, 262155, 2, -720856, 262155, 2, -655320, 262155, 2, -589784, 262155, 2, -524248, 262155, 2, -458712, 262155, 2, -393176, 262155, 2, -327640, 262155, 2, -262104, 262155, 2, -196568, 262155, 2, -131032, 262155, 2, -65496, 262155, 2, 40, 262155, 2, 65576, 262155, 2, 131112, 262155, 2, -1572823, 262155, 2, -1507287, 262155, 2, -1441751, 262155, 2, -1376215, 262155, 2, -1310679, 262155, 2, -1245143, 262155, 2, -1179607, 262155, 2, -1114071, 262155, 2, -1048535, 262155, 2, -982999, 262155, 2, -917463, 262155, 2, -851927, 262155, 2, -786391, 262155, 2, -720855, 262155, 2, -655319, 262155, 2, -589783, 262155, 2, -524247, 262155, 2, -458711, 262155, 2, -393175, 262155, 2, -327639, 262155, 2, -262103, 262155, 2, -196567, 262155, 2, -131031, 262155, 2, -65495, 262155, 2, 41, 262155, 2, 65577, 262155, 2, 131113, 262155, 2, -1572822, 262155, 2, -1507286, 262155, 2, -1441750, 262155, 2, -1376214, 262155, 2, -1310678, 262155, 2, -1245142, 262155, 2, -1179606, 262155, 2, -1114070, 262155, 2, -1048534, 262155, 2, -982998, 262155, 2, -917462, 262155, 2, -851926, 262155, 2, -786390, 262155, 2, -720854, 262155, 2, -655318, 262155, 2, -589782, 262155, 2, -524246, 262155, 2, -458710, 262155, 2, -393174, 262155, 2, -327638, 262155, 2, -262102, 262155, 2, -196566, 262155, 2, -131030, 262155, 2, -65494, 262155, 2, 42, 262155, 2, 65578, 262155, 2, 131114, 262155, 2, -1572821, 262155, 2, -1507285, 262155, 2, -1441749, 262155, 2, -1376213, 262155, 2, -1310677, 262155, 2, -1245141, 262155, 2, -1179605, 262155, 2, -1114069, 262155, 2, -1048533, 262155, 2, -982997, 262155, 2, -917461, 262155, 2, -851925, 262155, 2, -786389, 262155, 2, -720853, 262155, 2, -655317, 262155, 2, -589781, 262155, 2, -524245, 262155, 2, -458709, 262155, 2, -393173, 262155, 2, -327637, 262155, 2, -262101, 262155, 2, -196565, 262155, 2, -131029, 262155, 2, -65493, 262155, 2, 43, 262155, 2, 65579, 262155, 2, 131115, 262155, 2, -1376242, 131083, 1, -983041, 131083, 1, -1048576, 131083, 1, -1048575, 131083, 1, -1048574, 131083, 1, -1048573, 131083, 1, -1048572, 131083, 1, -1048571, 131083, 1, -1048570, 131083, 1, -1048569, 131083, 1, -1048568, 131083, 1, -1048567, 131083, 1, -1048566, 131083, 1, -1048565, 131083, 1, -1048564, 131083, 1, -1048563, 131083, 1, -1507332, 131083, 1, -1507331, 131083, 1, -1507330, 131083, 1, -1507329, 131083, 1, -1572864, 131083, 1, -1572863, 131083, 1, -1572862, 131083, 1, -1572861, 131083, 1, -1572860, 131083, 1, -1572859, 131083, 1, -1572858, 131083, 1, -1572857, 131083, 1, -1572856, 131083, 1, -1572855, 131083, 1, -1572854, 131083, 1, -1572853, 131083, 1, -1572852, 131083, 1, -1572851, 131083, 1, -1572850, 131083, 1, -1572849, 131083, 1, -1572848, 131083, 1, -1572847, 131083, 1, -1572846, 131083, 1, -1572845, 131083, 1, -1572844, 131083, 1, -1572843, 131083, 1, -1572842, 131083, 1, -1572841, 131083, 1, -1572840, 131083, 1, -1572839, 131083, 1, -1572838, 131083, 1)

[node name="Player" parent="." instance=ExtResource("3_x5t7n")]
material = SubResource("ShaderMaterial_efyl1")

[node name="Level0de" type="Sprite2D" parent="."]
visible = false
modulate = Color(0.486275, 0.486275, 0.486275, 1)
z_index = -29
position = Vector2(-64, -384)
texture = ExtResource("5_r24k6")
centered = false

[node name="SpinBlock" parent="." instance=ExtResource("6_6gd37")]
position = Vector2(232, -88)
item = ExtResource("7_cill0")

[node name="Door" parent="." instance=ExtResource("8_at63k")]
position = Vector2(392, -96)
level_scene = "res://Instances/Levels/DonutPlains/dghc.tscn"
spawn_position = Vector2(328, -16)

[node name="Door2" parent="." instance=ExtResource("8_at63k")]
position = Vector2(40, -256)
level_scene = "res://Instances/Levels/ghost_house_exit.tscn"

[node name="Boo" parent="." instance=ExtResource("9_bmvmd")]
position = Vector2(40, -128)

[node name="Boo2" parent="." instance=ExtResource("9_bmvmd")]
position = Vector2(120, 16)

[node name="Boo3" parent="." instance=ExtResource("9_bmvmd")]
position = Vector2(312, -144)

[node name="LevelBG" parent="." instance=ExtResource("10_vfaw7")]
main_texture = null
main_sprite_frames = SubResource("SpriteFrames_uh0cr")
sky_colour = Color(0.596078, 0.878431, 0.878431, 1)
enable_vertical_repeat = true

[node name="DragonCoin" parent="." instance=ExtResource("12_xscbm")]
position = Vector2(216, -64)

[node name="DragonCoin2" parent="." instance=ExtResource("12_xscbm")]
position = Vector2(200, -320)
