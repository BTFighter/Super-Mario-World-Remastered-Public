[gd_scene load_steps=15 format=4 uid="uid://cfqnik1ark44y"]

[ext_resource type="Script" path="res://Scripts/Classes/LevelClass.gd" id="1_id3ka"]
[ext_resource type="AudioStream" uid="uid://smgqxji42l8k" path="res://Resources/MusicTracks/SMB1Overworld.tres" id="2_ek45d"]
[ext_resource type="AudioStream" uid="uid://bju11ltkndcbs" path="res://Assets/Audio/BGM/SMB1/LevelComplete.mp3" id="3_bjci3"]
[ext_resource type="PackedScene" uid="uid://cqw1qs0bt5s4o" path="res://Instances/Prefabs/Player.tscn" id="3_vlyee"]
[ext_resource type="Texture2D" uid="uid://clpd6hf7kumrb" path="res://Assets/Sprites/Backgrounds/Overworld/Mountains/MountainsAutumn2.png" id="5_5vpkl"]
[ext_resource type="PackedScene" uid="uid://c1xol3wby2j0k" path="res://Instances/Prefabs/level_bg.tscn" id="6_lxa70"]
[ext_resource type="TileSet" uid="uid://bc6l5jqwp5nh" path="res://Resources/TileSets/smb_classic.tres" id="8_r7qdh"]
[ext_resource type="PackedScene" uid="uid://n683bw1fnuhd" path="res://Instances/Prefabs/end_flag_pole.tscn" id="9_cubr0"]
[ext_resource type="PackedScene" uid="uid://dwavjbyw0v12l" path="res://Instances/Prefabs/tile_map.tscn" id="10_yvci8"]
[ext_resource type="PackedScene" uid="uid://cly5f6jt1cd28" path="res://Instances/Prefabs/Interactables/pipe_area.tscn" id="12_wjt8o"]

[sub_resource type="Shader" id="Shader_1xk88"]
code = "// HSV to RBG from https://www.rapidtables.com/convert/color/hsv-to-rgb.html
// Rotation matrix from https://en.wikipedia.org/wiki/Rotation_matrix

shader_type canvas_item;


uniform float strength: hint_range(0., 1.) = 0.5;
uniform float speed: hint_range(0., 10.) = 0.5;
uniform float angle: hint_range(0., 360.) = 0.;

void fragment() {
	float hue = UV.x * cos(radians(angle)) - UV.y * sin(radians(angle));
	hue = fract(hue + fract(TIME  * speed));
	float x = 1. - abs(mod(hue / (1./ 6.), 2.) - 1.);
	vec3 rainbow;
	if(hue < 1./6.){
		rainbow = vec3(1., x, 0.);
	} else if (hue < 1./3.) {
		rainbow = vec3(x, 1., 0);
	} else if (hue < 0.5) {
		rainbow = vec3(0, 1., x);
	} else if (hue < 2./3.) {
		rainbow = vec3(0., x, 1.);
	} else if (hue < 5./6.) {
		rainbow = vec3(x, 0., 1.);
	} else {
		rainbow = vec3(1., 0., x);
	}
	vec4 color = texture(TEXTURE, UV);
	COLOR = mix(color, vec4(rainbow, color.a), strength);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_06j6i"]
resource_local_to_scene = true
shader = SubResource("Shader_1xk88")
shader_parameter/strength = 0.0
shader_parameter/speed = 0.5
shader_parameter/angle = 36.404

[sub_resource type="Gradient" id="Gradient_yv5ka"]
interpolation_mode = 2
offsets = PackedFloat32Array(0, 0.850427)
colors = PackedColorArray(0.972549, 0.878431, 0.690196, 1, 1, 0.635294, 0.784314, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_0q81q"]
gradient = SubResource("Gradient_yv5ka")
width = 1
height = 256
fill_from = Vector2(0, 1)
fill_to = Vector2(0, 0)

[node name="1-2b" type="Node"]
script = ExtResource("1_id3ka")
level_music = ExtResource("2_ek45d")
custom_victory_theme = ExtResource("3_bjci3")
camera_left_end_position = 608
camera_top_end_position = -222

[node name="Player" parent="." instance=ExtResource("3_vlyee")]
material = SubResource("ShaderMaterial_06j6i")
position = Vector2(-56, 0)

[node name="LevelBG" parent="." instance=ExtResource("6_lxa70")]
main_texture = ExtResource("5_5vpkl")
sky_texture = SubResource("GradientTexture2D_0q81q")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAD8/wAAAAABAAAAAAD9/wAAAAABAAAAAAD+/wAAAAABAAAAAAD//wAAAAABAAAAAAAAAAAAAAABAAAAAAABAAAAAAABAAAAAAACAAAAAAABAAAAAAADAAAAAAABAAAAAAAEAAAAAAABAAAAAAAFAAAAAAABAAAAAAAGAAAAAAABAAAAAAAHAAAAAAABAAAAAAAIAAAAAAABAAAAAAAJAAAAAAABAAAAAAAKAAAAAAABAAAAAAALAAAAAAABAAAAAAAMAAAAAAABAAAAAAANAAAAAAABAAAAAAAOAAAAAAABAAAAAAAPAAAAAAABAAAAAAAQAAAAAAABAAAAAAARAAAAAAABAAAAAAASAAAAAAABAAAAAAATAAAAAAABAAAAAAAUAAAAAAABAAAAAAAVAAAAAAABAAAAAAAWAAAAAAABAAAAAAAXAAAAAAABAAAAAAAYAAAAAAABAAAAAAAZAAAAAAABAAAAAAAaAAAAAAABAAAAAAAbAAAAAAABAAAAAAAcAAAAAAABAAAAAAAdAAAAAAABAAAAAAAeAAAAAAABAAAAAAAfAAAAAAABAAAAAAAgAAAAAAABAAAAAAAhAAAAAAABAAAAAAAiAAAAAAABAAAAAAAjAAAAAAABAAAAAAAkAAAAAAABAAAAAAAlAAAAAAABAAAAAAAlAAEAAAABAAEAAAAlAAIAAAABAAEAAAD8/wEAAAABAAEAAAD8/wIAAAABAAEAAAD8/wMAAAABAAEAAAD9/wEAAAABAAEAAAD9/wIAAAABAAEAAAD9/wMAAAABAAEAAAD+/wEAAAABAAEAAAD+/wIAAAABAAEAAAD+/wMAAAABAAEAAAD//wEAAAABAAEAAAD//wIAAAABAAEAAAD//wMAAAABAAEAAAAAAAEAAAABAAEAAAAAAAIAAAABAAEAAAAAAAMAAAABAAEAAAABAAEAAAABAAEAAAABAAIAAAABAAEAAAABAAMAAAABAAEAAAACAAEAAAABAAEAAAACAAIAAAABAAEAAAACAAMAAAABAAEAAAADAAEAAAABAAEAAAADAAIAAAABAAEAAAADAAMAAAABAAEAAAAEAAEAAAABAAEAAAAEAAIAAAABAAEAAAAEAAMAAAABAAEAAAAFAAEAAAABAAEAAAAFAAIAAAABAAEAAAAFAAMAAAABAAEAAAAGAAEAAAABAAEAAAAGAAIAAAABAAEAAAAGAAMAAAABAAEAAAAHAAEAAAABAAEAAAAHAAIAAAABAAEAAAAHAAMAAAABAAEAAAAIAAEAAAABAAEAAAAIAAIAAAABAAEAAAAIAAMAAAABAAEAAAAJAAEAAAABAAEAAAAJAAIAAAABAAEAAAAJAAMAAAABAAEAAAAKAAEAAAABAAEAAAAKAAIAAAABAAEAAAAKAAMAAAABAAEAAAALAAEAAAABAAEAAAALAAIAAAABAAEAAAALAAMAAAABAAEAAAAMAAEAAAABAAEAAAAMAAIAAAABAAEAAAAMAAMAAAABAAEAAAANAAEAAAABAAEAAAANAAIAAAABAAEAAAANAAMAAAABAAEAAAAOAAEAAAABAAEAAAAOAAIAAAABAAEAAAAOAAMAAAABAAEAAAAPAAEAAAABAAEAAAAPAAIAAAABAAEAAAAPAAMAAAABAAEAAAAQAAEAAAABAAEAAAAQAAIAAAABAAEAAAAQAAMAAAABAAEAAAARAAEAAAABAAEAAAARAAIAAAABAAEAAAARAAMAAAABAAEAAAASAAEAAAABAAEAAAASAAIAAAABAAEAAAASAAMAAAABAAEAAAATAAEAAAABAAEAAAATAAIAAAABAAEAAAATAAMAAAABAAEAAAAUAAEAAAABAAEAAAAUAAIAAAABAAEAAAAUAAMAAAABAAEAAAAVAAEAAAABAAEAAAAVAAIAAAABAAEAAAAVAAMAAAABAAEAAAAWAAEAAAABAAEAAAAWAAIAAAABAAEAAAAWAAMAAAABAAEAAAAXAAEAAAABAAEAAAAXAAIAAAABAAEAAAAXAAMAAAABAAEAAAAYAAEAAAABAAEAAAAYAAIAAAABAAEAAAAYAAMAAAABAAEAAAAZAAEAAAABAAEAAAAZAAIAAAABAAEAAAAZAAMAAAABAAEAAAAaAAEAAAABAAEAAAAaAAIAAAABAAEAAAAaAAMAAAABAAEAAAAbAAEAAAABAAEAAAAbAAIAAAABAAEAAAAbAAMAAAABAAEAAAAcAAEAAAABAAEAAAAcAAIAAAABAAEAAAAcAAMAAAABAAEAAAAdAAEAAAABAAEAAAAdAAIAAAABAAEAAAAdAAMAAAABAAEAAAAeAAEAAAABAAEAAAAeAAIAAAABAAEAAAAeAAMAAAABAAEAAAAfAAEAAAABAAEAAAAfAAIAAAABAAEAAAAfAAMAAAABAAEAAAAgAAEAAAABAAEAAAAgAAIAAAABAAEAAAAgAAMAAAABAAEAAAAhAAEAAAABAAEAAAAhAAIAAAABAAEAAAAhAAMAAAABAAEAAAAiAAEAAAABAAEAAAAiAAIAAAABAAEAAAAiAAMAAAABAAEAAAAjAAEAAAABAAEAAAAjAAIAAAABAAEAAAAjAAMAAAABAAEAAAAkAAEAAAABAAEAAAAkAAIAAAABAAEAAAAkAAMAAAABAAEAAAAlAAMAAAABAAEAAAAjAP//AAAKAAMAAAAkAP//AAALAAMAAAAlAP//AAAMAAMAAAAMAP//AAAKAAMAAAANAP//AAALAAMAAAAOAP//AAAMAAMAAAABAP//AAAMAAUAAAACAP7/AAAMAAUAAAADAP3/AAAMAAUAAAAEAPz/AAAMAAUAAAAFAPv/AAAMAAUAAAAGAPr/AAAMAAUAAAAHAPn/AAAMAAUAAAAIAPj/AAAMAAUAAAAJAPj/AAAMAAUAAAAJAPn/AAAMAAUAAAAJAPr/AAAMAAUAAAAJAPv/AAAMAAUAAAAJAPz/AAAMAAUAAAAJAP3/AAAMAAUAAAAJAP7/AAAMAAUAAAAJAP//AAAMAAUAAAAIAP//AAAMAAUAAAAHAP//AAAMAAUAAAAGAP//AAAMAAUAAAAFAP//AAAMAAUAAAAEAP//AAAMAAUAAAADAP//AAAMAAUAAAACAP//AAAMAAUAAAAHAPz/AAAMAAUAAAAHAPv/AAAMAAUAAAAHAPr/AAAMAAUAAAAIAPr/AAAMAAUAAAAIAPn/AAAMAAUAAAAIAPv/AAAMAAUAAAAIAPz/AAAMAAUAAAAIAP3/AAAMAAUAAAAHAP3/AAAMAAUAAAAGAP3/AAAMAAUAAAAGAPz/AAAMAAUAAAAGAPv/AAAMAAUAAAAFAPz/AAAMAAUAAAAFAP3/AAAMAAUAAAAEAP3/AAAMAAUAAAAEAP7/AAAMAAUAAAADAP7/AAAMAAUAAAAFAP7/AAAMAAUAAAAGAP7/AAAMAAUAAAAHAP7/AAAMAAUAAAAIAP7/AAAMAAUAAAA=")
tile_set = ExtResource("8_r7qdh")

[node name="EndFlagPole" parent="." instance=ExtResource("9_cubr0")]
position = Vector2(296, 0)

[node name="TileMap" parent="." instance=ExtResource("10_yvci8")]
layer_0/tile_data = PackedInt32Array(-65537, 5, 0, -1, 5, 1, -131072, 65541, 0, -65536, 65541, 1)

[node name="PipeArea" parent="." instance=ExtResource("12_wjt8o")]
position = Vector2(0, -32)
exit_only = true
